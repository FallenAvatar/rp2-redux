if (hasProperty('buildScan')) {
    buildScan {
        termsOfServiceUrl = 'https://gradle.com/terms-of-service'
        termsOfServiceAgree = 'yes'
    }
}

gradle.projectsEvaluated{
    def projects = [
            "RP2",
			"ThermalCore",
            "CoFHCore"
    ]
    project.tasks.create('assembleAll') {
        def last = null
        projects.collect { project(it).tasks.assemble }.each {
            if (last != null) {
                it.mustRunAfter(last)
            }
            last = it
            dependsOn(it)
        }
        finalizedBy('copyAll')
    }
    project.tasks.create('copyAll', Copy) {spec ->
        projects.each {
            spec.from(project(it).tasks.jar.getOutputs().getFiles())
        }
        spec.into file("RP2/build/libs")
    }
}